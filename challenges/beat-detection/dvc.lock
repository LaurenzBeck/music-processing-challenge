schema: '2.0'
stages:
  train_val_split:
    cmd: python challenges/beat-detection/filter_onsets.py
    deps:
    - path: challenges/beat-detection/filter_onsets.py
      md5: d3352d6cd7dc6498fa912bf4a3ba5668
      size: 5475
    - path: reports/onset-detection/test-onsets.json
      md5: e307b98eafce0f3281c88869ca195d29
      size: 113827
    - path: reports/onset-detection/val-onsets.json
      md5: 2b2512abcc3a5a404fecb0245cfb838c
      size: 73362
    params:
      params.yaml:
        beat_detection:
          num_centroids: 4
          width_of_gaussian: 0.15
          lower_bpm_bound: 50
          upper_bpm_bound: 200
          bpm_sweep_step_size: 5
          upper_offset_bound: 1.0
          num_offsets_for_sweep: 5
          beat_threshold: 0.25
    outs:
    - path: reports/beat-detection/test-beats.json
      md5: 078ce125de68def82b5228b89ccd1656
      size: 23320
    - path: reports/beat-detection/val-beats.json
      md5: e8b9da518ff5125ff1f15430f8c903e2
      size: 14908
  evaluate:
    cmd: python challenges/beat-detection/eval_beats.py --submission reports/beat-detection/val-beats.json
      --target reports/beat-detection/val-targets.json
    deps:
    - path: challenges/beat-detection/eval_beats.py
      md5: 89ec8abf3cf9bddc7121bbf11df8d812
      size: 1855
    - path: reports/beat-detection/val-beats.json
      md5: e8b9da518ff5125ff1f15430f8c903e2
      size: 14908
    - path: reports/beat-detection/val-targets.json
      md5: ad890469444b7b0a014921144af5faa4
      size: 16980
    outs:
    - path: reports/beat-detection/metrics.json
      md5: 7527393e319967f475dee64368240814
      size: 42
