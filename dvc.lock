schema: '2.0'
stages:
  train_val_split:
    cmd: python challenges/train_val_split.py
    deps:
    - path: challenges/train_val_split.py
      md5: 9939832f90ddf6b28335aaafd6cba70a
      size: 1098
    - path: data/raw/train
      md5: a4da05829c6006bb7be263752f10e8b1.dir
      size: 215577173
      nfiles: 508
    params:
      params.yaml:
        data_dir_train: data/raw/train
        seed: 42
        train_val_split: 0.8
    outs:
    - path: data/processed/train_files.pkl
      md5: 35601749b160f97984b0586236f95ff4
      size: 3542
    - path: data/processed/val_files.pkl
      md5: 7448303f28d0ede78d0c619dbe1ae7ea
      size: 911
  featurize:
    cmd: python challenges/onset-detection/extract_features.py
    deps:
    - path: challenges/onset-detection/extract_features.py
      md5: faa0cb6c8d5a1632de973bd16e876623
      size: 5526
    - path: data/processed/train_files.pkl
      md5: 35601749b160f97984b0586236f95ff4
      size: 3542
    - path: data/processed/val_files.pkl
      md5: 7448303f28d0ede78d0c619dbe1ae7ea
      size: 911
    - path: data/raw/test
      md5: 01ed73995bbf40999fbd40737fcd67e4.dir
      size: 67482988
      nfiles: 50
    params:
      params.yaml:
        data_dir_test: data/raw/test
        featurize:
          fps: 10
    outs:
    - path: data/interim/
      md5: c0d55cb5ec2b9dbb966ab8e0531517ec.dir
      size: 3157378
      nfiles: 1593
  prepare_labels:
    cmd: python challenges/onset-detection/prepare_labels.py
    deps:
    - path: challenges/onset-detection/prepare_labels.py
      md5: dd6a777b475c208af7db0144b925ff1e
      size: 2376
    - path: data/processed/train_files.pkl
      md5: 35601749b160f97984b0586236f95ff4
      size: 3542
    - path: data/processed/val_files.pkl
      md5: 7448303f28d0ede78d0c619dbe1ae7ea
      size: 911
    params:
      params.yaml:
        featurize.fps: 10
    outs:
    - path: data/processed/train/labels/
      md5: eebb67fc3bffa876756ef0bd072db14e.dir
      size: 109387
      nfiles: 101
    - path: data/processed/val/labels/
      md5: 96de5af10fb2c65908662d0d0908242d.dir
      size: 25401
      nfiles: 26
  combine_features:
    cmd: python challenges/onset-detection/combine_features_to_dataframe.py
    deps:
    - path: challenges/onset-detection/combine_features_to_dataframe.py
      md5: feb161bb7b4a872d32389347fc148288
      size: 2749
    - path: data/interim/
      md5: c0d55cb5ec2b9dbb966ab8e0531517ec.dir
      size: 3157378
      nfiles: 1593
    - path: data/processed/train/labels
      md5: eebb67fc3bffa876756ef0bd072db14e.dir
      size: 109387
      nfiles: 101
    - path: data/processed/val/labels
      md5: 96de5af10fb2c65908662d0d0908242d.dir
      size: 25401
      nfiles: 26
    params:
      params.yaml:
        featurize.fps: 10
    outs:
    - path: data/processed/test/data.csv
      md5: b36f732c5529243c10360a3f138c0931
      size: 837412
    - path: data/processed/train/data.csv
      md5: 640477a386a496e165ed1c7fa55d5cc2
      size: 2474547
    - path: data/processed/val/data.csv
      md5: 64ad9be4b23f77742e47b162096b1eb9
      size: 552591
  train:
    cmd: python challenges/onset-detection/train.py
    deps:
    - path: challenges/onset-detection/train.py
      md5: 8af22e1ab53130e87ace06e66a8d62fd
      size: 1616
    - path: data/processed/train/data.csv
      md5: 640477a386a496e165ed1c7fa55d5cc2
      size: 2474547
    - path: data/processed/val/data.csv
      md5: 64ad9be4b23f77742e47b162096b1eb9
      size: 552591
    params:
      params.yaml:
        seed: 42
        train:
          batch_size: 64
          epochs: 10
          learning_rate: 0.0004
          model_file_name: fastai-tabular
    outs:
    - path: dvclive.json
      md5: 5b6baf48c7b8560bf6c94652e205ceb5
      size: 184
    - path: dvclive/scalars
      md5: fa67f11e6d68f742cf678843045bdcfc.dir
      size: 1374
      nfiles: 4
    - path: models/
      md5: 34657e72c639178cd142a361855b8ff9.dir
      size: 279856
      nfiles: 1
